<!doctype html>
<html
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
        xmlns:th="http://thymeleaf.org" xmlns="http://www.w3.org/1999/html"
        layout:decorate="~{fragment/layout}"
>

<body layout:fragment="content" data-spy="scroll" data-target=".site-navbar-target" data-offset="100">


<div class="container p-5 m-5 border-bottom">
    <div class="row">
        <div class="col-lg-12">
            <h3 class="heading" style="margin-bottom: 30px;">회원정보 수정</h3>
        </div>
        <div class="col-lg-7">
            <form onsubmit="MemberUpdate__submit(this); return false;"
                  th:action="@{|/member/modify|}" method="POST">
                <div class="form-group">
                    <label class="text-black" for="email">이메일</label>
                    <input type="email" class="form-control" id="email" name="email" th:value="${member.email}" maxlength="50">
                </div>
                <div class="form-group">
                    <label class="text-black" for="password">비밀번호</label>
                    <input type="password" class="form-control" id="password" name="password" placeholder="비밀번호는 8자 이상 15자 이하로 입력해주세요" minlength="8" maxlength="15">
                </div>
                <div class="form-group">
                    <label class="text-black" for="password">비밀번호 재확인</label>
                    <input type="password" class="form-control" id="rePassword" name="rePassword" minlength="8" maxlength="15">
                </div>
                <div th:if="${member.nickname} != 'null'" class="form-group">
                    <label class="text-black" for="nickname"><small><span style="color:#107BE9;">[선택] &nbsp;</span></small>필명</label>
                    <input  type="text" class="form-control" id="nickname" name="nickname" th:value="${member?.nickname}">
                    <p>필명 등록 시 작가회원으로 활동하게 됩니다.</p>
                </div>
                <div th:if="${member.nickname} == 'null'" class="form-group">
                    <label class="text-black" for="none"><small><span style="color:#107BE9;">[선택] &nbsp;</span></small>필명</label>
                    <input type="text" class="form-control" id="none" name="nickname">
                    <p>필명 등록 시 작가회원으로 활동하게 됩니다.</p>
                </div>
                <button type="submit" class="btn btn-primary py-2" style="font-size:14px;">수정</button>
            </form>
        </div>
    </div>
</div>

<script layout:fragment="script" type='text/javascript'>
        function MemberUpdate__submit(form) {

        form.password.value = form.password.value.trim();

        if (form.password.value.length == 0) {
        alert("비밀번호를 입력해주세요.");
        form.password.focus();
        return;
    }

        form.rePassword.value = form.rePassword.value.trim();

        if (form.rePassword.value.length == 0) {
        alert("확인용 비밀번호를 입력해주세요.");
        form.rePassword.focus();
        return;
    }
        if (form.rePassword.value!=form.password.value){
        alert("두 비밀번호가 일치하지 않습니다.")
    }

        form.email.value = form.email.value.trim();

        if (form.email.value.length == 0) {
        alert("이메일을 입력해주세요.");
        form.email.focus();
        return;
    }

        form.submit();
    }
</script>
</body>
</html>

